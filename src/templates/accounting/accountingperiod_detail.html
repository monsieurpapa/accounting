{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Accounting Period" %}: {{ period.name }} | Système de Comptabilité{% endblock %}

{% block page_title %}{% trans "Accounting Period Details" %}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'accounting:fiscalyear_list' %}">{% trans "Fiscal Years" %}</a></li>
<li class="breadcrumb-item"><a href="{% url 'accounting:fiscalyear_detail' period.fiscal_year.uuid %}">{{
        period.fiscal_year.name }}</a></li>
<li class="breadcrumb-item active" aria-current="page">{{ period.name }}</li>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow mb-4 border-left-success">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-success">{% trans "Period Information" %}</h6>
                <div class="btn-group">
                    <a href="{% url 'accounting:accountingperiod_edit' period.uuid %}"
                        class="btn btn-sm btn-outline-secondary">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <a href="{% url 'accounting:accountingperiod_delete' period.uuid %}"
                        class="btn btn-sm btn-outline-danger">
                        <i class="bi bi-trash"></i>
                    </a>
                </div>
            </div>
            <div class="card-body">
                <div class="text-center mb-4">
                    <h3 class="font-weight-bold text-dark">{{ period.name }}</h3>
                    <p class="text-muted">{{ period.fiscal_year.name }}</p>
                </div>
                <hr>
                <div class="row">
                    <div class="col-6 mb-3">
                        <label class="text-xs text-uppercase font-weight-bold text-muted mb-0">{% trans "Starts"
                            %}</label>
                        <div class="h6 font-weight-bold">{{ period.start_date|date:"d/m/Y" }}</div>
                    </div>
                    <div class="col-6 mb-3">
                        <label class="text-xs text-uppercase font-weight-bold text-muted mb-0">{% trans "Ends"
                            %}</label>
                        <div class="h6 font-weight-bold">{{ period.end_date|date:"d/m/Y" }}</div>
                    </div>
                </div>
                <div class="mt-2 d-flex justify-content-between align-items-center">
                    <div>
                        <label class="text-xs text-uppercase font-weight-bold text-muted mb-0 d-block">{% trans "Status"
                            %}</label>
                        {% if period.is_closed %}
                        <span class="badge bg-secondary p-2">{% trans "Closed / Locked" %}</span>
                        {% else %}
                        <span class="badge bg-success p-2">{% trans "Active / Open" %}</span>
                        {% endif %}
                    </div>
                    {% if not period.is_closed %}
                    <form action="{% url 'accounting:accountingperiod_close' period.uuid %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning btn-sm">
                            <i class="bi bi-lock-fill"></i> {% trans "Close Period" %}
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}