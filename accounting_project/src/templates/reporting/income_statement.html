{% extends 'base.html' %}
{% block content %}
<h1>Income Statement</h1>
<form method="get" class="mb-4">
    <label>Fiscal Year:
        <select name="fiscal_year">
            <option value="">-- Select --</option>
            {% for fy in fiscal_years %}
            <option value="{{ fy.pk }}" {% if current_fiscal_year and fy.pk == current_fiscal_year.pk %}selected{% endif %}>{{ fy.name }}</option>
            {% endfor %}
        </select>
    </label>
    <button type="submit">Filter</button>
</form>
<div class="row">
    <div class="col-md-6">
        <h3>Revenues</h3>
        <table class="table table-bordered">
            <thead><tr><th>Code</th><th>Name</th><th class="text-end">Amount</th></tr></thead>
            <tbody>
                {% for row in revenues %}
                <tr><td>{{ row.code }}</td><td>{{ row.name }}</td><td class="text-end">{{ row.balance|floatformat:2 }}</td></tr>
                {% endfor %}
                <tr class="table-primary fw-bold"><td colspan="2">Total Revenue</td><td class="text-end">{{ total_revenue|floatformat:2 }}</td></tr>
            </tbody>
        </table>
    </div>
    <div class="col-md-6">
        <h3>Expenses</h3>
        <table class="table table-bordered">
            <thead><tr><th>Code</th><th>Name</th><th class="text-end">Amount</th></tr></thead>
            <tbody>
                {% for row in expenses %}
                <tr><td>{{ row.code }}</td><td>{{ row.name }}</td><td class="text-end">{{ row.balance|floatformat:2 }}</td></tr>
                {% endfor %}
                <tr class="table-primary fw-bold"><td colspan="2">Total Expense</td><td class="text-end">{{ total_expense|floatformat:2 }}</td></tr>
            </tbody>
        </table>
    </div>
</div>
<h3>Net Income: <span class="text-success">{{ net_income|floatformat:2 }}</span></h3>
<p>Generated on: {{ generation_date }}</p>
{% endblock %} 